<div id="validate_secret_modal">
    <div class="message"> Validate Credentials
        <button id="validate_secret_btn" class="primary" onclick="return false;">Check</button>
        <div id="validation_status"></div>
    </div>

    <script type="text/javascript">
        require(['jquery','mage/storage',], function ($) {
            $(document).ready(function(){
                if($("#payment_other_simplcheckout_test_secret").val()!="")
                {
                    $("#validate_secret_btn").prop('disabled', true);
                    return false;
                }
            });

            $('#payment_other_simplcheckout_test_secret').on('keypress','',function(){
                $("#validate_secret_btn").prop('disabled', false);
                return true;
            });

            jQuery(document).on('click', '#validate_secret_modal', function (event) {
                param = $("#payment_other_simplcheckout_test_secret").val();
                $.ajax({
                    showLoader: true,
                    url: "<?php echo $block->getValidateUrl() ?>",
                    type: "POST",
                    data: {client_secret:param},
                    success: function(response){
                        if (response.status)
                            $("#validate_secret_btn").prop('disabled', true);
                        $('#validation_status').html(response.message).show();
                        return true;
                    }
                });
            });
        });
    </script>
</div>

